<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HW3</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<link rel="stylesheet" href="style_basic.css">
</head>

<body>
	<!-- We will populate this list via the database, see Javascript code below -->
	<header>
		<div class="container text-center">
			<h1>
				CSC 353 HW3
			</h1>
		</div>
	</header>

	<div class="row">

		<div class="col-12 col-lg-4" id="home-btn">

			<a href="player.html">
				<button>Search Player</button>
			</a>

		</div>

		<div class="col-12 col-lg-4" id="home-btn">

			<a href="tournament.html">
				<button>View Tournaments</button>
			</a>

		</div>

		<div class="col-12 col-lg-4" id="home-btn">

			<a href="stats.html">
				<button>Player Stats</button>
			</a>

		</div>

	</div>

	<ul id="myList">
	</ul>

	<p> First way of getting dynamic content: Javascript fetch API </p>
	<button onclick="fetchData()"> Click to display students </button>

	<hr>

	<p> First way of getting dynamic content: HTML forms </p>
	<form action="/senator" method="GET">
		<label for="fname">First name:</label>
		<br>
		<!-- Use "value" instead of "placeholder" for a default entered value -->
		<!-- Note the required attribute here, but not in the last name -->
		<!-- id is the local name for DOM manipulation; name is the name posted to the server -->
		<input type="text" id="fname" name="fname" placeholder="(required)" required><br>

		<label for="lname">Last name:</label>
		<br>
		<!-- Use "value" instead of "placeholder" for a default entered value -->
		<input type="text" id="lname" name="lname" placeholder="(optional)"><br>

		<label for="lname">Telephone:</label>
		<br>
		<!-- Learn the syntax for regular expression patterns in https://regexone.com/ -->
		<input type="text" id="phone" name="phone" placeholder="555-555-1234"
			pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required>

		<br>
		<br>

		<input type="submit" value="Submit">
	</form>
</body>

<script>
	function fetchData() {
		const responsePromise = fetch("/tournament", {
			method: "GET",
			headers: {
				"Content-type": "application/json; charset=UTF-8"
			}
		});

		responsePromise.then(
			// Fulfilled
			async (response) => {
				populateList(await response.json())
			},
			// Error
			(error) => {
				alert("Cannot obtain students")
			})
	}

	// For testing in the HTML world
	// <!-- <button type="button" onclick="populateList([['a', 'b'], ['c', 'd']])"> -->
	function populateList(results) {
		let list = document.getElementById("myList")

		results.forEach(element => {
			let tourney = document.createElement("li")

			tourney.innerText = element.name

			list.appendChild(tourney)
		})
	}
</script>

</html>